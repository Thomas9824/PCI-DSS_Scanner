# DOCUMENTATION COMPLÃˆTE DU PROJET PCI-DSS SCANNER
===========================================================

## ğŸ“‹ PRÃ‰SENTATION GÃ‰NÃ‰RALE

Le **PCI-DSS Scanner** est un systÃ¨me automatisÃ© complet pour la surveillance et la gestion des documents de conformitÃ© PCI DSS (Payment Card Industry Data Security Standard). Ce projet combine plusieurs modules spÃ©cialisÃ©s pour offrir une solution intÃ©grÃ©e de dÃ©tection des changements, tÃ©lÃ©chargement automatique et extraction des exigences de conformitÃ©.

### ğŸ¯ Objectif Principal
Automatiser la surveillance du site officiel PCI Security Standards Council pour dÃ©tecter instantanÃ©ment toute mise Ã  jour de documents critiques et extraire automatiquement les exigences de conformitÃ© dans un format structurÃ©.

### âœ¨ Valeur AjoutÃ©e
- **ConformitÃ© Continue** : Assure une veille permanente sur les Ã©volutions des standards
- **TraÃ§abilitÃ© ComplÃ¨te** : Historique dÃ©taillÃ© de tous les changements dÃ©tectÃ©s
- **Multi-langue** : Support automatique de 5 langues (EN, FR, ES, DE, PT)
- **Extraction Intelligente** : Conversion automatique des PDFs en donnÃ©es structurÃ©es
- **Notifications Proactives** : Alerts automatiques par email avec rapports dÃ©taillÃ©s

## ğŸ—ï¸ ARCHITECTURE DU SYSTÃˆME

### Structure Modulaire
```
pci_scraper/
â”œâ”€â”€ ğŸš€ pci_auto_scraper.py      # Orchestrateur principal
â”œâ”€â”€ ğŸ“Š pci_documents.csv        # Base de donnÃ©es des documents
â”œâ”€â”€ ğŸ“ pci_change_scraper/      # Module de dÃ©tection des changements
â”œâ”€â”€ ğŸ“¥ pci_pdf_scraper/         # Module de tÃ©lÃ©chargement PDF
â”œâ”€â”€ ğŸ” pci_pdf_extractor/       # Module d'extraction des exigences
â”œâ”€â”€ ğŸ’¾ downloads/               # Stockage des documents tÃ©lÃ©chargÃ©s
â”œâ”€â”€ âš™ï¸ requirements.txt         # DÃ©pendances Python
â”œâ”€â”€ ğŸ¬ run.sh                   # Script de lancement
â””â”€â”€ ğŸ“– README.md               # Documentation de base
```

### Flux de DonnÃ©es
1. **DÃ©tection** â†’ Analyse des changements sur le site officiel
2. **Filtrage** â†’ Identification des documents modifiÃ©s/nouveaux
3. **TÃ©lÃ©chargement** â†’ RÃ©cupÃ©ration sÃ©lective des PDFs
4. **Extraction** â†’ Conversion en format CSV structurÃ©
5. **Notification** â†’ Envoi automatique de rapports par email

## ğŸ”§ COMPOSANTS DÃ‰TAILLÃ‰S

### 1. Orchestrateur Principal (pci_auto_scraper.py)

**RÃ´le** : Coordinateur central qui pilote l'ensemble du processus
**FonctionnalitÃ©s clÃ©s** :
- âœ… Gestion du workflow complet (dÃ©tection â†’ tÃ©lÃ©chargement â†’ extraction)
- âœ… Coordination entre les diffÃ©rents modules
- âœ… Gestion des sessions de scraping horodatÃ©es
- âœ… Statistiques et rapports de performance
- âœ… Envoi automatique d'emails rÃ©capitulatifs HTML
- âœ… SystÃ¨me de fallback en cas d'Ã©chec partiel
- âœ… Matching prÃ©cis des documents par nom/version/catÃ©gorie

**Configuration** :
- Mode headless/interface pour les navigateurs
- RÃ©pertoires personnalisables de tÃ©lÃ©chargement
- API Keys pour les services tiers (Resend pour emails)
- Filtrage intelligent des documents Ã  traiter

### 2. DÃ©tecteur de Changements (pci_change_scraper/)

**Fichier principal** : `pci_scraper.py`
**ResponsabilitÃ©** : Surveillance continue des modifications sur le site PCI Security Standards Council

**FonctionnalitÃ©s** :
- ğŸ” **Scraping Intelligent** : Utilise Selenium WebDriver pour gÃ©rer le contenu dynamique
- ğŸ“Š **Analyse Comparative** : Compare les versions actuelles avec l'historique local
- ğŸ·ï¸ **CatÃ©gorisation Automatique** : Classifie automatiquement les documents (PCI DSS, SAQ, AOC, etc.)
- ğŸ’¾ **Persistance des DonnÃ©es** : Sauvegarde en CSV avec horodatage
- ğŸ”„ **DÃ©tection Multi-critÃ¨res** : Analyse des changements de version, nom, URL
- âš¡ **Performance OptimisÃ©e** : Traitement batch et parallÃ©lisation

**Technologies utilisÃ©es** :
- Selenium WebDriver (Chrome) avec gestion automatique des drivers
- Pandas pour la manipulation de donnÃ©es tabulaires
- WebDriverWait pour la gestion robuste des timeouts

### 3. TÃ©lÃ©chargeur PDF (pci_pdf_scraper/)

**Fichier principal** : `pci_pdf_scraper.py`
**Mission** : TÃ©lÃ©chargement sÃ©lectif et intelligent des documents PDF

**CapacitÃ©s avancÃ©es** :
- ğŸ›¡ï¸ **Contournement Anti-Bot** : Utilise selenium-stealth et rotation d'user-agents
- ğŸ“‹ **TÃ©lÃ©chargement SÃ©lectif** : Ne tÃ©lÃ©charge que les documents modifiÃ©s
- ğŸŒ **Gestion des Langues** : DÃ©tection automatique et tÃ©lÃ©chargement multi-langue
- ğŸ”„ **Retry Logic** : MÃ©canismes de rÃ©cupÃ©ration en cas d'Ã©chec
- ğŸ“ **Organisation Automatique** : Classement par session avec horodatage

**Techniques de bypass** :
- Headers HTTP rotatifs et randomisÃ©s
- DÃ©lais variables entre requÃªtes
- Simulation de comportement humain
- Gestion des cookies et sessions

### 4. Extracteur d'Exigences (pci_pdf_extractor/)

**Fichiers spÃ©cialisÃ©s** :
- `testv5.py` : Extracteur franÃ§ais (FR)
- `testv5_EN.py` : Extracteur anglais (EN)
- `testv5_ES.py` : Extracteur espagnol (ES)
- `testv5_DE.py` : Extracteur allemand (DE)
- `testv5_PT.py` : Extracteur portugais (PT)

**Intelligence d'extraction** :
- ğŸ§  **Reconnaissance de Patterns** : DÃ©tection automatique des structures d'exigences
- ğŸ“„ **Analyse SÃ©mantique** : Identification des sections (exigences, tests, conseils)
- ğŸ—ï¸ **Structure HiÃ©rarchique** : PrÃ©servation de l'arborescence des exigences (1.1.1, 1.1.2, etc.)
- ğŸŒ **Adaptation Linguistique** : Marqueurs et patterns spÃ©cifiques Ã  chaque langue
- ğŸ“Š **Format StandardisÃ©** : Export CSV uniforme malgrÃ© les diffÃ©rences linguistiques

**Processus d'extraction** :
1. **DÃ©tection des Pages** : Identification automatique des zones contenant les exigences
2. **Segmentation** : DÃ©coupage du contenu par sections logiques
3. **Classification** : Distinction entre exigences, tests et conseils
4. **Structuration** : Organisation hiÃ©rarchique et numÃ©rotation
5. **Export** : GÃ©nÃ©ration de fichiers CSV avec mÃ©tadonnÃ©es

## âš¡ FONCTIONNALITÃ‰S AVANCÃ‰ES

### SystÃ¨me de Matching PrÃ©cis
- **Correspondance Exacte** : Algorithmes de matching nom/version/catÃ©gorie
- **Gestion des Variantes** : Prise en compte des diffÃ©rences de nommage
- **Validation CroisÃ©e** : VÃ©rification multi-critÃ¨res avant tÃ©lÃ©chargement

### Gestion Multi-Session
- **Sessions HorodatÃ©es** : Chaque exÃ©cution gÃ©nÃ¨re un dossier unique
- **Archivage Automatique** : Conservation de l'historique complet
- **TraÃ§abilitÃ©** : Logs dÃ©taillÃ©s de chaque opÃ©ration

### Notifications Intelligentes
- **Emails HTML** : Rapports visuels avec design moderne
- **PiÃ¨ces Jointes Automatiques** : CSV gÃ©nÃ©rÃ©s attachÃ©s aux emails
- **Indicateurs de Statut** : Codes couleur pour success/warning/error
- **Statistiques DÃ©taillÃ©es** : MÃ©triques de performance et rÃ©sultats

### Support Multi-langue AvancÃ©
- **DÃ©tection Automatique** : Reconnaissance de la langue basÃ©e sur le nom du fichier
- **Extracteurs SpÃ©cialisÃ©s** : Moteurs d'extraction optimisÃ©s par langue
- **Patterns Linguistiques** : Marqueurs adaptÃ©s Ã  chaque langue
- **Uniformisation** : Format de sortie standardisÃ© malgrÃ© les diffÃ©rences

## ğŸ® UTILISATION PRATIQUE

### Installation ComplÃ¨te
```bash
# 1. Cloner le projet
git clone https://github.com/Thomas9824/PCI-DSS_Scanner.git
cd PCI-DSS_Scanner

# 2. CrÃ©er l'environnement virtuel
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# ou venv\Scripts\activate  # Windows

# 3. Installer les dÃ©pendances
pip install -r requirements.txt

# 4. Configuration des variables d'environnement
cp .env.example .env
# Ã‰diter .env avec vos clÃ©s API
```

### Configuration Environnement (.env)
```bash
RESEND_API_KEY=your_resend_api_key_here
EMAIL_RECIPIENT=your-email@example.com
```

### Modes d'ExÃ©cution

**ExÃ©cution Automatique** :
```bash
python pci_auto_scraper.py
```

**Avec le script de lancement** :
```bash
chmod +x run.sh
./run.sh
```

**ExÃ©cution programmÃ©e (cron)** :
```bash
# ExÃ©cution quotidienne Ã  9h00
0 9 * * * /path/to/project/run.sh
```

## ğŸ“Š TYPES DE DOCUMENTS SUPPORTÃ‰S

### Documents PCI DSS Core
- **PCI DSS v4.0.1** : Standard principal avec toutes ses versions linguistiques
- **Summary of Changes** : RÃ©sumÃ©s des modifications entre versions
- **Quick Reference Guide** : Guides de rÃ©fÃ©rence rapide
- **Prioritized Approach** : MÃ©thodologies d'approche prioritaire

### Self-Assessment Questionnaires (SAQ)
- **SAQ A** : CommerÃ§ants card-not-present (e-commerce)
- **SAQ A-EP** : CommerÃ§ants e-commerce avec redirection
- **SAQ B** : CommerÃ§ants avec terminaux d'impression/dip
- **SAQ B-IP** : CommerÃ§ants avec terminaux IP
- **SAQ C** : CommerÃ§ants avec systÃ¨mes d'application de paiement
- **SAQ C-VT** : CommerÃ§ants avec terminaux virtuels web
- **SAQ D Merchant** : Tous autres commerÃ§ants
- **SAQ D Service Provider** : Prestataires de services
- **SAQ P2PE** : CommerÃ§ants utilisant des solutions P2PE validÃ©es
- **SAQ SPOC** : Organisations avec Contact Point de Service

### Attestations of Compliance (AOC)
- AOCs correspondant Ã  chaque type de SAQ
- Templates et formulaires officiels

### Documents Techniques
- **ASV Resource Guide** : Guides pour les fournisseurs de scanning
- **ROC Templates** : ModÃ¨les de rapport de conformitÃ©
- **Vulnerability Management** : Guides de gestion des vulnÃ©rabilitÃ©s

## ğŸŒ SUPPORT LINGUISTIQUE DÃ‰TAILLÃ‰

### Langues SupportÃ©es
- ğŸ‡¬ğŸ‡§ **Anglais (EN)** : Langue de rÃ©fÃ©rence, extraction complÃ¨te
- ğŸ‡«ğŸ‡· **FranÃ§ais (FR)** : Support complet avec patterns francophones
- ğŸ‡ªğŸ‡¸ **Espagnol (ES)** : Adaptation aux spÃ©cificitÃ©s hispaniques
- ğŸ‡©ğŸ‡ª **Allemand (DE)** : Gestion des structures germaniques
- ğŸ‡µğŸ‡¹ **Portugais (PT)** : Support des variantes BR et PT

### MÃ©canisme de DÃ©tection
```python
# Exemples de patterns de dÃ©tection
language_indicators = {
    'EN': ['_en.pdf', 'english', '-en-'],
    'FR': ['_fr.pdf', 'francais', 'merchant-fr'],
    'ES': ['_es.pdf', 'espanol', 'merchant-es'],
    'DE': ['_de.pdf', 'deutsch', 'merchant-de'],
    'PT': ['_pt.pdf', 'portugues', 'merchant-pt']
}
```

## ğŸ“ˆ SYSTÃˆME DE MONITORING ET STATISTIQUES

### MÃ©triques CollectÃ©es
- **documents_checked** : Nombre total de documents analysÃ©s
- **changes_detected** : Changements identifiÃ©s (nouveaux + mis Ã  jour)
- **downloads_attempted** : Tentatives de tÃ©lÃ©chargement
- **downloads_successful** : TÃ©lÃ©chargements rÃ©ussis
- **extracted_files** : Fichiers CSV gÃ©nÃ©rÃ©s
- **execution_time** : Temps d'exÃ©cution total

### Rapports Automatiques
- **Logs Console** : Affichage temps rÃ©el du processus
- **Emails HTML** : Rapports visuels avec design moderne
- **Historique CSV** : TraÃ§abilitÃ© complÃ¨te des documents

## ğŸ”’ SÃ‰CURITÃ‰ ET BONNES PRATIQUES

### Gestion des Credentials
- Variables d'environnement pour les API keys
- Fichiers .env exclus du versioning
- Pas de hardcoding de credentials dans le code

### Anti-Detection
- Rotation d'user-agents
- DÃ©lais randomisÃ©s entre requÃªtes
- Headers HTTP rÃ©alistes
- Utilisation de selenium-stealth

### Gestion des Erreurs
- Try/catch complets sur toutes les opÃ©rations critiques
- Fallback automatique en cas d'Ã©chec partiel
- Logs dÃ©taillÃ©s pour le debugging
- Validation des donnÃ©es avant traitement

## âš™ï¸ DÃ‰PENDANCES TECHNIQUES

### DÃ©pendances Python Core
```
selenium==4.35.0              # WebDriver pour l'automatisation
webdriver-manager==4.0.2      # Gestion automatique des drivers
pandas==2.3.2                 # Manipulation de donnÃ©es
beautifulsoup4==4.13.5        # Parsing HTML
requests==2.32.5              # RequÃªtes HTTP
PyPDF2==3.0.1                 # Extraction PDF
```

### DÃ©pendances SpÃ©cialisÃ©es
```
selenium-stealth==1.0.6       # Contournement anti-bot
resend                         # Service d'email transactionnel
python-dotenv==1.1.1          # Gestion variables d'environnement
lxml==6.0.1                   # Parser XML/HTML performant
```

### PrÃ©requis SystÃ¨me
- **Python 3.7+** : Version minimum supportÃ©e
- **Chrome/Chromium** : Pour Selenium WebDriver
- **AccÃ¨s Internet** : Pour le scraping et l'envoi d'emails
- **Espace Disque** : ~100MB pour les PDFs et l'historique

## ğŸš€ OPTIMISATIONS ET PERFORMANCES

### StratÃ©gies d'Optimisation
- **TÃ©lÃ©chargement SÃ©lectif** : Seuls les documents modifiÃ©s sont tÃ©lÃ©chargÃ©s
- **Traitement ParallÃ¨le** : Extraction simultanÃ©e de plusieurs langues
- **Cache Intelligent** : Ã‰vite le re-tÃ©lÃ©chargement de documents identiques
- **Sessions Persistantes** : RÃ©utilisation des connexions HTTP

### Gestion MÃ©moire
- Traitement des PDFs par chunks
- Nettoyage automatique des objets Selenium
- Gestion des grandes collections de donnÃ©es

## ğŸ”§ MAINTENANCE ET Ã‰VOLUTION

### Monitoring Proactif
- Logs dÃ©taillÃ©s pour identifier les problÃ¨mes
- Alertes automatiques en cas d'Ã©chec
- Statistiques de performance pour optimisation

### Ã‰volutivitÃ©
- Architecture modulaire pour ajouts faciles
- Support nouveaux formats de documents
- Extension possible Ã  d'autres sites de conformitÃ©
- API potentielle pour intÃ©gration externe

### Maintenance PrÃ©ventive
- Mise Ã  jour rÃ©guliÃ¨re des dÃ©pendances
- Tests de rÃ©gression sur les patterns d'extraction
- VÃ©rification pÃ©riodique des sÃ©lecteurs CSS/XPath

## ğŸ¯ CAS D'USAGE TYPIQUES

### Organisations de ConformitÃ©
- Surveillance automatique des Ã©volutions rÃ©glementaires
- Mise Ã  jour proactive des politiques internes
- GÃ©nÃ©ration de rapports de conformitÃ©

### Consultants en SÃ©curitÃ©
- Veille technologique automatisÃ©e
- PrÃ©paration de documentation client
- Analyse comparative des versions

### DÃ©partements IT
- IntÃ©gration dans les processus de gouvernance
- Automatisation des audits de conformitÃ©
- Mise Ã  jour des procÃ©dures techniques

## ğŸ‰ RÃ‰SUMÃ‰ DES BÃ‰NÃ‰FICES

### Gain de Temps
- **Automatisation ComplÃ¨te** : Plus de surveillance manuelle
- **Traitement Batch** : Gestion simultanÃ©e de dizaines de documents
- **Format PrÃªt Ã  l'Emploi** : CSV directement exploitables

### FiabilitÃ©
- **DÃ©tection Exhaustive** : Aucun changement n'Ã©chappe au systÃ¨me
- **Multi-critÃ¨res** : Validation croisÃ©e des modifications
- **Historique Complet** : TraÃ§abilitÃ© totale des Ã©volutions

### FlexibilitÃ©
- **Multi-langue** : Support de 5 langues principales
- **Configurable** : Adaptation aux besoins spÃ©cifiques
- **Extensible** : Architecture modulaire pour Ã©volutions futures

---

**ğŸ“ Support et Contributions**
Ce projet est maintenu activement. Pour signaler des bugs, proposer des amÃ©liorations ou contribuer au code, utilisez les issues GitHub du projet.

**âš–ï¸ ConformitÃ© LÃ©gale**
Ce systÃ¨me respecte les robots.txt et conditions d'utilisation des sites web ciblÃ©s. Il est conÃ§u pour un usage de conformitÃ© et Ã©ducationnel uniquement.

**ğŸ† QualitÃ© du Code**
Le code suit les bonnes pratiques Python avec documentation complÃ¨te, gestion d'erreurs robuste et tests de validation.